<?xml version="1.0" encoding="utf-8"?>
<issues>
  <issue>
    <field name="Priority">
      <value>Major</value>
    </field>
    <field name="Type">
      <value>Feature</value>
    </field>
    <field name="State">
      <value>Incomplete</value>
    </field>
    <field name="Assignee" />
    <field name="Subsystem">
      <value>No subsystem</value>
    </field>
    <field name="Fix versions" />
    <field name="Affected versions" />
    <field name="Fixed in build" />
    <field name="numberInProject">
      <value>126</value>
    </field>
    <field name="summary">
      <value>AspView: use byte order mark detection and Default-Encoding when reading view source files</value>
    </field>
    <field name="description">
      <value>The current implementation of AspViewCompiler.ReadFile uses File.ReadAllText to read in the view content. ReadAllText assumes UTF-8 encoding of the files. This causes trouble when the view files are ANSI encoded and contain non-ASCII characters. 

Depending on your regional settings, Visual Studio will not use UTF-8 as the default encoding for .aspx files. For example, on my German Vista version, the default encoding for .aspx files is Western European, Codepage 1252. If the view file now contains e.g. umlauts (ä, ö, ü etc), the .cs files generated by AspView will replace these characters with wrong characters.

The proposed solution (see patch) is to use StreamReader with a special constructor instead. See: http://msdn.microsoft.com/en-us/library/akzyzwh9.aspx and provide Encoding.Default as encoding and enable byte order mark detection. 

That way, the stream reader will do the following:
- check whether the file has a BOM (which UTF-8 files should have)
- if so, use the encoding detected by means of the BOM
- otherwise, fall back to the provided encoding (in this case, Encoding.Default)

This will make AspView work with ANSI files as well as with proper UTF-8 files.
</value>
    </field>
    <field name="created">
      <value>1210145119000</value>
    </field>
    <field name="updated">
      <value>1213515774000</value>
    </field>
    <field name="reporterName">
      <value>aloker</value>
    </field>
    <field name="updaterName">
      <value>aloker</value>
    </field>
    <field name="resolved">
      <value>1282140091791</value>
    </field>
    <field name="permittedGroup">
      <value>All Users</value>
    </field>
  </issue>
</issues>